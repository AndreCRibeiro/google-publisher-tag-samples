<html>
  <head>
    <meta charset="utf-8">
    <title>Teste 2</title>
    <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
    <script>
      window.googletag = window.googletag || {cmd: []};

      googletag.cmd.push(function() {
        googletag.defineSlot('/6355419/Travel', [728, 90], 'div-1')
          .setTargeting('test', 'lazyload')
          .addService(googletag.pubads());
        googletag.defineSlot('/6355419/Travel', [728, 90], 'div-2')
          .setTargeting('test', 'lazyload')
          .addService(googletag.pubads());
        googletag.defineSlot('/6355419/Travel', [728, 90], 'div-3')
          .setTargeting('test', 'lazyload')
          .addService(googletag.pubads());
        googletag.pubads().enableLazyLoad({
          fetchMarginPercent: 10,
          renderMarginPercent: 1,
          mobileScaling: 1.0
        });
        googletag.pubads().addEventListener('slotRequested', function(event) {
          updateSlotStatus(event.slot.getSlotElementId(), 'fetched');
        });
        googletag.pubads().addEventListener('slotOnload', function(event) {
          updateSlotStatus(event.slot.getSlotElementId(), 'rendered');
        });
        googletag.enableServices();
      });

      function updateSlotStatus(slotId, state) {
        var elem = document.getElementById(slotId + '-' + state);
        elem.className = 'activated';
        elem.innerText = 'Yes';
      }
    </script>
    <!-- <script>
      //load the apstag.js library
      !function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");
      
      //initialize the apstag.js library on the page to allow bidding
      apstag.init({
           pubID: 'xxxx', //enter your pub ID here as shown above, it must within quotes
           adServer: 'googletag'
      });
      apstag.fetchBids({
           slots: [{
               slotID: 'div-1', //example: 'div-gpt-ad-1475102693815-0'
               slotName: '/6355419/Travel', //example: '12345/box-1'
               sizes: [[728, 90]] //example: [[300,250], [300,600]]
           },
           {
               slotID: 'div-2', //example: 'div-gpt-ad-1475185990716-0'
               slotName: '/6355419/Travel2', //example: '12345/leaderboard-1'
               sizes: [[728, 90]] //example: [[728,90]]
           }],
           timeout: 2e3
      }, function(bids) {
           // set apstag targeting on googletag, then trigger the first GAM request in googletag's disableInitialLoad integration
           googletag.cmd.push(function(){
               apstag.setDisplayBids();
               googletag.pubads().refresh();
           });
      }); 
      </script> -->
    <style>
      div.ad-slot {
        border-style: dashed;
        display: block;
        margin: auto;
      }

      div.main-content {
        background-color: lightsteelblue;
        margin-top: 125px;
        overflow: hidden;
        width: 100%;
      }

      div.status-panel {
        background: white;
        height: 125px;
        position: fixed;
        top: 0;
        width: 100%;
      }

      table {
        width: 100%;
      }

      table th {
        text-align: center;
      }

      table td:not(.slot-name) {
        background-color: lightsalmon;
      }

      table td.activated {
        background-color: lightgreen;
      }
    </style>
  </head>
  <body>
    <div class="main-content">
      <div id="div-1" class="ad-slot" style="height: 90px; width: 728px;">
        <script>
          googletag.cmd.push(function() { googletag.display('div-1'); });
        </script>
      </div> 
      <div style="height:300vh"></div>
      <div id="div-2" class="ad-slot" style="height: 90px; width: 728px;">
        <script>
          googletag.cmd.push(function() { googletag.display('div-2'); });
        </script>
      </div>
      <div style="height:900vh"></div>
      <div id="div-3" class="ad-slot" style="height: 90px; width: 728px;">
        <script>
          googletag.cmd.push(function() { googletag.display('div-3'); });
        </script>
      </div>
    </div>
    <div class="status-panel">
      <table>
        <tr>
          <th>Ad Slot</th>
          <th>Fetched?</th>
          <th>Rendered?</th>
        </tr>
        <tr>
          <td class="slot-name">Ad Slot 1</td>
          <td id="div-1-fetched">No</td>
          <td id="div-1-rendered">No</td>
        </tr>
        <tr>
          <td class="slot-name">Ad Slot 2</td>
          <td id="div-2-fetched">No</td>
          <td id="div-2-rendered">No</td>
        </tr>
        <tr>
          <td class="slot-name">Ad Slot 3</td>
          <td id="div-3-fetched">No</td>
          <td id="div-3-rendered">No</td>
        </tr>
      </table>
      <p>
        Scroll the container below to lazily load the ad slots.
      </p>
    </div>
  </body>
</html>
